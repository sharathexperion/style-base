/* --------------------------------------------------------------------------
   Usage example

   <div class="u-grid-row">
     <div class="u-col-12 u-col-desktop-up-6">Panel 1</div>
     <div class="u-col-12 u-col-desktop-up-6">Panel 2</div>
   </div>

   - Creates a 12-column grid
   - Columns stack by default and split at defined breakpoints (tablet-up, desktop-up, etc.)
   - Grid gap uses spacing tokens (see spacing utilities)
   -------------------------------------------------------------------------- */

@use '../mixins/breakpoint' as *;

/* --------------------------------------------------------------------------
   Configuration
   -------------------------------------------------------------------------- */

$grid-columns: 12 !default;
$grid-gap: var(--space-4) !default; // 16px default

/* --------------------------------------------------------------------------
   Grid container
   -------------------------------------------------------------------------- */

.u-grid-row {
  --grid-gap: var(--gap, #{$grid-gap});
  --grid-row-gap: var(--row-gap, var(--grid-gap));
  --grid-column-gap: var(--column-gap, var(--grid-gap));

  display: grid;
  grid-template-columns: repeat(#{$grid-columns}, minmax(0, 1fr));
  gap: var(--grid-row-gap) var(--grid-column-gap);
}

/* --------------------------------------------------------------------------
   Mixin: Grid Columns
   -------------------------------------------------------------------------- */

@mixin make-grid-columns($infix: null) {
  $prefix: if($infix, '-#{$infix}', '');

  .u-col#{$prefix}-full {
    grid-column: 1 / -1;
  }

  @for $i from 1 through $grid-columns {
    .u-col#{$prefix}-#{$i} {
      grid-column: span #{$i};
    }
  }
}

/* --------------------------------------------------------------------------
   Column span utilities
   -------------------------------------------------------------------------- */

/* Base: < 768px (mobile) */
@include make-grid-columns;

/* Tablet and up: ≥ 768px */
@include breakpoint-up(tablet) {
  @include make-grid-columns('tablet-up');
}

/* Desktop and up: ≥ 1024px */
@include breakpoint-up(desktop) {
  @include make-grid-columns('desktop-up');
}

/* Wide and up: ≥ 1280px */
@include breakpoint-up(wide) {
  @include make-grid-columns('wide-up');
}
