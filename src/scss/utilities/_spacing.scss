/**
 * Spacing Utilities
 * -----------------
 * Token-driven spacing utilities for StyleBase.
 *
 * Rules:
 * - Utilities map 1:1 to spacing tokens
 * - No raw px / rem math
 * - No values outside the spacing scale
 *
 * Naming:
 * - u-p-4   → padding: var(--space-4)
 * - u-mt-2  → margin-top: var(--space-2)
 * - u-px-3  → padding-inline: var(--space-3)
 * - u-gap-5 → gap: var(--space-5)
*/

@use 'sass:meta';

@layer utilities {
  /* Spacing scale (must mirror tokens exactly) */
  $spaces: (
    0: var(--space-0),
    1: var(--space-1),
    2: var(--space-2),
    3: var(--space-3),
    4: var(--space-4),
    5: var(--space-5),
    6: var(--space-6),
    7: var(--space-7),
    8: var(--space-8),
    9: var(--space-9),
  );

  /* Directions (logical + RTL-safe) */
  $dirs: (
    '': '',
    't': '-top',
    'b': '-bottom',
    'l': '-inline-start',
    'r': '-inline-end',
    'x': (
      '-inline-start',
      '-inline-end',
    ),
    'y': (
      '-top',
      '-bottom',
    ),
  );

  /* Padding utilities */
  @each $key, $val in $spaces {
    @each $short, $dir in $dirs {
      .u-p#{$short}-#{$key} {
        @if meta.type-of($dir) == 'string' {
          padding#{$dir}: $val;
        } @else {
          @each $side in $dir {
            padding#{$side}: $val;
          }
        }
      }
    }
  }

  /* Margin utilities */
  @each $key, $val in $spaces {
    @each $short, $dir in $dirs {
      .u-m#{$short}-#{$key} {
        @if meta.type-of($dir) == 'string' {
          margin#{$dir}: $val;
        } @else {
          @each $side in $dir {
            margin#{$side}: $val;
          }
        }
      }
    }
  }

  /* Gap utilities */
  @each $key, $val in $spaces {
    .u-gap-#{$key} {
      gap: $val;
    }

    .u-row-gap-#{$key} {
      row-gap: $val;
    }

    .u-col-gap-#{$key} {
      column-gap: $val;
    }
  }

  /* Auto margin helpers */
  .u-mt-auto {
    margin-top: auto;
  }

  .u-ml-auto {
    margin-inline-start: auto;
  }

  .u-mr-auto {
    margin-inline-end: auto;
  }

  .u-mx-auto {
    margin-inline: auto;
  }
}
